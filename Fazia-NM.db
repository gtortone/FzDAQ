# Run Control FSM
# for FzNodeManager on compute or storage DAQ node

record(mbbo, "$(HOSTNAME):RC:state") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(ZRST,"IDLE")
  field(ONST,"READY")
  field(TWST,"RUNNING")
  field(THST,"PAUSED")
  field(PINI,"YES")
  field(VAL,"0")
  field(DISP,"1")
}

record(mbbo, "$(HOSTNAME):RC:transition") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(ZRST,"ERROR")
  field(ONST,"OK")
  field(PINI,"YES")
  field(DISP,"1")
  field(PINI,"YES")
  field(VAL,"1")
}

record(stringout,"$(HOSTNAME):profile") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
}

#
# FzReader IN data flow
#

record(ao, "$(HOSTNAME):reader:in:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:in:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:in:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:in:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzReader OUT data flow
#

record(ao, "$(HOSTNAME):reader:out:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:out:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:out:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):reader:out:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzParser cumulative IN data flow
# 

record(ao, "$(HOSTNAME):parser:in:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:in:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:in:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:in:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzParser cumulative OUT data flow
# 

record(ao, "$(HOSTNAME):parser:out:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:out:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:out:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):parser:out:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzFSM cumulative IN data flow
# 

record(ao, "$(HOSTNAME):fsm:in:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:in:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:in:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:in:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzFSM cumulative OUT data flow
# 

record(ao, "$(HOSTNAME):fsm:out:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:out:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"1000")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:out:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:out:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzFSM cumulative status report
#

record(ao, "$(HOSTNAME):fsm:states:invalid") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:events:empty") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:events:good") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):fsm:events:bad") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzWriter IN data flow
# 

record(ao, "$(HOSTNAME):writer:in:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:in:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbit/s")
  field(LOPR,"0")
  field(HOPR,"10000")	# 10 Gbit/s interface
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:in:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:in:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}

#
# FzWriter OUT data flow
# 

record(ao, "$(HOSTNAME):writer:out:data") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:out:databw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(PINI,"YES")
  field(EGU,"Mbyte/s")
  field(LOPR,"0")
  field(HOPR,"500")	# 500 Mbyte/s RAID disk
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:out:ev") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev")
  field(PINI,"YES")
  field(VAL,"0")
}

record(ao, "$(HOSTNAME):writer:out:evbw") {
  field(SCAN,"Passive")
  field(DTYP,"Soft Channel")
  field(EGU,"ev/s")
  field(PINI,"YES")
  field(VAL,"0")
}
